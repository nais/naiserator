config:
  description: pod disruption budget on-premises with default configuration

resourceOptions:
  NumReplicas: 1

input:
  kind: Application
  apiVersion: v1alpha1
  metadata:
    name: myapplication
    namespace: mynamespace
    uid: "123456"
    labels:
      team: myteam
  spec:
    image: navikt/myapplication:1.2.3

tests:
  - apiVersion: policy/v1beta1
    kind: PodDisruptionBudget
    name: myapplication
    operation: CreateOrUpdate
    match:
      - name: "PodDisruptionBudget created with minAvailable 1"
        type: subset
        resource:
          metadata:
            labels:
              app: myapplication
              team: myteam
            ownerReferences:
              - apiVersion: v1alpha1
                kind: Application
                name: myapplication
                uid: "123456"
          spec:
            minAvailable: 1
            selector:
              matchLabels:
                app: myapplication


