config:
  description: pod disruption budget should be removed when max replicas == 1

resourceOptions:
  NumReplicas: 1

input:
  kind: Application
  apiVersion: v1alpha1
  metadata:
    name: myapplication
    namespace: mynamespace
    uid: "123456"
    labels:
      team: myteam
  spec:
    replicas:
      max: 1
    image: navikt/myapplication:1.2.3

tests:
  - apiVersion: policy/v1beta1
    kind: PodDisruptionBudget
    name: myapplication
    operation: DeleteIfExists
    match:
      - name: "PodDisruptionBudget should be removed"
        type: subset
        resource:
          metadata:
            labels:
              app: myapplication
              team: myteam
            ownerReferences:
              - apiVersion: v1alpha1
                kind: Application
                name: myapplication
                uid: "123456"
          spec: {}


